# FIO Swift iOS SDK
The Foundation for Interwallet Operability (FIO) is a consortium of leading blockchain wallets, exchanges and payments providers that seeks to accelerate blockchain adoption by reducing the risk, complexity, and inconvenience of sending and receiving cryptoassets.

For information on FIO, visit the [FIO website](https://fio.foundation).

For information on the FIO Chain, API, and SDKs visit the [FIO Protocol Developer Hub](https://developers.fioprotocol.io).

# Technology
The FIO iOS SDK is developed in Swift.

# Version 
Visit the [FIO Protocol Developer Hub](https://developers.fioprotocol.io) to get information on FIO SDK versions. Only use an SDK that has a major version number that matches the current FIO Protocol blockchain major version number (e.g. 1.x.x).

# Building The FIO iOS SDK

##builds the SDK for use in the app store
	in terminal, navigate to the main folder and run the command:
		./buildsdk_appstore.sh

##builds the SDK for use in another project, for simulator usage
	in terminal, navigate to the main folder and run the command:
		./buildsdk_simulator.sh 

# Generating Documentation
Jazzy is used to generate documentation. After installing jazzy via '[sudo] gem install jazzy'.

	in terminal, navigate to the main folder, and run this build script:
		./build_docs.sh

	i.e. https://github.com/realm/jazzy

The documentation will appear in the folder "docs" in the root of the project.

# Using the SDK
The SDK uses a singleton model requiring initialization in the constructor as these parameters are referenced in subsequent SDK Calls.

## Base URL for TestNet
	http://testnet.fioprotocol.io/v1/

## TestNet Monitor Tool
	https://monitor.testnet.fioprotocol.io/

## Initializing the SDK
	privateKey/publicKey - the wallet user's private/public keys
	url - the base URL to the FIO Protocol blockchain API (e.g., http://testnet.fioprotocol.io/v1/)
	mockUrl - the URL of the server used to auto-register FIO names for wallet users. This is only used by wallets that have deployed a central server used to register names on their domain. It is used by the registerOnBehalfOfUser method
	walletFioAddress - FIO Address of the wallet which generates this transaction.  Set to empty if not known. (i.e. TPID)

	Constructor for Singleton:

		sharedInstance(privateKey:String? = nil, publicKey:String? = nil, url:String? = nil, mockUrl: String? = nil, walletFioAddress: String? = nil)

The user's private/public key can be generated by calling this method on the sdk:
	privatePublicKeyPair

## Using the SDK
### Example Usage in Swift
	
	let fioSDK _ = FIOSDK.sharedInstance(privateKey: privateKey, publicKey: publicKey, url: defaultServer, mockUrl: mockUrl)

#SDK Conventions
##SDK Source Code Project
The FIOSDK project has the FIOSDK framework and unit tests. Testing all functionality of the SDK.

##SDK Coding Methodology and Conventions
The FIO SDK Coding Methodology and Conventions follow swift patterns and conventions.  For usage in Swift language based iOS applications.
###Class Conventions
	Singleton’s are used for accessing SDK functionality. Using the sharedInstance() convention.
 ####Examples	
	FIOSDK.sharedInstance().isFioNameValid(fioName: "test@brd")
 ####Caller Style
	Method calls are asynchronous and follow the swift closure style for these calls.
 ####Examples
	FIOSDK.sharedInstance().getFioNameByAddress(publicAddress: receiveAddress, 
			currencyCode:"ETH", completion:  {result, error in ()
          				print (result.name) 
		})
####Error Handling
	Errors are returned within the closure for asynchronous methods.  These are returned in the error object within the closure.  The type of error and status can be determined by evaluating the error?.kind property.  
####Examples	
	if (error?.kind == FIOError.ErrorKind.Success){ 
		print(“success”) 
	 }

##Validation
	The FIO iOS SDK has validation methods for validating your data.  
	See the BaseFIOSDK section for validation methods.

##SUFs
	There are 1,000,000,000 Smallest Units of FIO (SUFs) inside 1 FIO.

#### SUF Utilities 
####
	Use the ####SUFUtils convenience class for converting between SUFs and FIO.

# Workflow for using the SDK with TestNet
Most Signed API calls charge fees and require a FIO address that is associated with the user making the call. 

#### Creating a test account with FIO tokens
When running a test you will want to register addresses and transfer funds. But, registering a new address for the first time requires FIO tokens. Therefore, some manual setup is required to associate FIO tokens with a FIO public key. To set up a FIO public key with FIO tokents in a test environment:
 
1. Manually create two private/public FIO key pairs 
	1. Navigate to the website: https://monitor.testnet.fioprotocol.io
	2. Select the 'Create Keypair' button (top left of the website)
	3. Copy the keypairs and FIO Internal Account 
2. Manually register a FIO address for both of these FIO key pairs. 
	1. Navigate to the website: https://monitor.testnet.fioprotocol.io
	2. Select the 'Register Address' button
	3. Type in a FIO address 
	4. Paste in one of the public keys (created above)
	5. Select the 'Create' button
	6. Do this for each public key pair (twice).  The created FIO address will be in this format, "mytest:fiotestnet"
3. Manually transfer funds into these FIO addresses.
	1. Navigate to the website: https://monitor.testnet.fioprotocol.io
	2. Select the 'Faucet' button
	3. Paste in one of the public keys (created above)
	4. Select the 'Send Coins' button
	5. Do this for each public key pair (twice)
4. These FIO public addresses now have funds available for making Signed API calls.
5. Edit the test script to add these FIO addresses and the private/public FIO key pairs
	1. Edit the privateKey, publicKey, privateKey2, publicKey2, testFioAddressName, testFioAddressName2 variables in the test file 
6. Run the tests: 
	Within xCode, select from the menu: 
		Product > Test 

#### When calling a Signed API call that charges FEES, 
Use the following steps to determine the fee and pass it to the signed call.

	1. Call getFee to get the fee for the Signed API call
	2. Call the API Signed call with the fee

# FIO Keys
## Generating FIO Private/Public Keys?
The SDK provides methods to generate FIO Private/Public Key pairs.  
	Use this method:
#### FIOSDK().privatePublicKeyPair

## Generating FIO Private/Public Keys without using the SDK?
The following information can be used to manually generate FIO keys:

FIO Keys use SLIP-235 for BIP-0044.
https://github.com/satoshilabs/slips/blob/master/slip-0044.md

Following the EOS example of private and public key generation. We replace EOS slip '194' with '235'.  And 'EOS' public key prefix with 'FIO'.
https://eosio.stackexchange.com/questions/397/generate-eos-keys-from-mnemonic-seed

##  FIO Key Derivation Path:
"44'/235'/0'/0/0"

## FIO Key Generation Testing

Using this mnemonic phrase:
"valley alien library bread worry brother bundle hammer loyal barely dune brave"

This is the expected Private Key:
"5Kbb37EAqQgZ9vWUHoPiC2uXYhyGSFNbL6oiDp24Ea1ADxV1qnu"

This is the expected Public Key:
"FIO5kJKNHwctcfUM5XZyiWSqSTM5HTzznJP9F3ZdbhaQAHEVq575o"

# Release Notes

## Version 1.0.0
Added additional Unit Tests for Encryption.  Comparing and Validating results across the kotlin, iOS and typescript SDKs.
No changes to the SDK code base.

## Version 0.9.2
Updated and cleaned up SDK code base.
Finalization of method names and parameter names and order


